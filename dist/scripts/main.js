"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function initMap(){dataRequest.done(function(t){drawMap(t.assets)})}function drawMap(t){var e={lat:42.33894360169467,lng:-71.1169069898682},n=new google.maps.Map(document.getElementById("map"),{zoom:13,center:e}),r=new App(t,n);r.categories.forEach(function(t){$("#category-dropdown").append("<option>"+t+"</option>")}),$("#category-dropdown").change(function(){r.filterByCategory($("#category-dropdown :selected").text())});var a=new google.maps.places.Autocomplete(document.getElementById("places-input"));a.bindTo("bounds",n),a.addListener("place_changed",function(){a.getPlace()}),window.autocomplete=a,r.plotAssets()}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),dataRequest=$.get("../data/boston-main-assets.json"),App=function(){function t(e,n){_classCallCheck(this,t),this.assets=e,this.map=n,this.parse(this.assets),this.currentMarkers=[]}return _createClass(t,[{key:"parse",value:function(t){this.categories=[].concat(_toConsumableArray(new Set(this.assets.map(function(t){return t.Category}))))}},{key:"filterByCategory",value:function(t){this.currentCategory!==t&&("All"===t?this.plotAssets():(this.clearAssets(),this.plotAssets(this.assets.filter(function(e){return e.Category===t}))))}},{key:"plotAssets",value:function(t){var e=this;t=t||this.assets,t.forEach(function(t){var n=new google.maps.Marker({position:{lat:t.MatchLatit,lng:t.MatchLongi},map:e.map}),r=new google.maps.InfoWindow({content:e.getInfoWindowDom(t,!1)});n.addListener("click",function(){e.currentInfoWindow&&e.currentInfoWindow.close(),r.open(e.map,n),e.currentInfoWindow=r}),e.currentMarkers.push(n)})}},{key:"clearAssets",value:function(){this.currentMarkers.forEach(function(t){t.setMap(null)}),this.currentMarkers=[]}},{key:"getInfoWindowDom",value:function(t,e){return e?"":'\n        <div class="info-window">\n          <h3>'+t.Organizati+'</h3>\n          <table class="table">\n            <tr><td>Address</td><td> '+t.Address_Te+"</td></tr>\n            <tr><td>Website</td><td> "+t.Website+"</td></tr>\n            <tr><td>Phone</td><td> "+t.Phone_Numb+"</td></tr>\n            <tr><td>Fax\t</td><td> "+t.Fax+"</td></tr>\n            <tr><td>Email\t</td><td> "+t.Email+"</td></tr>\n            <tr><td>Languages\t</td><td> "+t.Languages+"</td></tr>\n            <tr><td>Information</td><td> "+t.Informatio+"</td></tr>\n            <tr><td>Category</td><td> "+t.Category+"</td></tr>\n          </table>\n        </div>\n      "}}]),t}();